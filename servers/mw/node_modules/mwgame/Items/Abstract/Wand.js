var O2 = require('o2');
var Item = require('./Item.js');

/**
 * Baguette de base
 * Dispose d'un cooldown empeche les tirs trop rapprochÃ©s
 */
var Wand = O2.extendClass(Item, {

	type: 'wand',

	_nLastUseTime: 0,

	missileRef: 'p_magbolt',
	cooldown: 300,
	chargeTime: 5000,

	cool: function(ctx) {
		var nCooldown = this.cooldown * (1 + ctx.caster.getSoul().getAttribute('cooldown') / 100) | 0;
		if (this._nLastUseTime + nCooldown > ctx.time) {
			// cooldown encore actif
			ctx.fail = 'cooldown';
			return false;
		} else {
			this._nLastUseTime = ctx.time;
			return true;
		}
	}
});

module.exports = Wand;
