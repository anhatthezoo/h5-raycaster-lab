#!/bin/bash

# a tool for archiving deprecated projects
# this tools zip project sources and move them to "archive"

sScriptDir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

listAvailableSourceProjects() {
	echo "Here are the available source projects : "
	ls "$sScriptDir/../sources"
}

archiveFromSource() {
	if [ -z "$1" ]
	then
		listAvailableSourceProjects
		return
	fi
	local sProject="$1"
	local sSourceDir="$sScriptDir/../sources"
	local myPwd=`pwd`

	if [ ! -d "$sSourceDir/$sProject" ]
	then
		echo "There is no source project named : $sProject"
		listAvailableSourceProjects
	else
		cd "$sSourceDir/$sProject"
		tar -czf ../$sProject.tar.gz *
		cd ..
		mv $sProject.tar.gz ../archives/
	fi
	cd "$myPwd"
}

archiveFromSource $1
