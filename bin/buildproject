#!/bin/bash

# a module builder tool
# this tool converts "sources" to "modules"

sScriptDir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

listAvailableSourceProjects() {
	echo "Here are the available source projects : "
	ls "$sScriptDir/../sources"
}

buildModuleFromSource() {
	if [ -z "$1" ]
	then
		listAvailableSourceProjects
		return
	fi
	local sProject="$1"
	local sSourceDir="$sScriptDir/../sources"
	local sProjectDir="$sSourceDir/$sProject"
	local myPwd=`pwd`

	if [ ! -d "$sProjectDir" ]
	then
		echo "There is no source project named : $sProject"
		listAvailableSourceProjects
	else
		php -f $sProjectDir/cjs.php -- build
	fi
	cd "$myPwd"
}

buildModuleFromSource $1
