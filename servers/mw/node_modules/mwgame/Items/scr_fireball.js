var O2 = require('o2');
var CONST = require('../data/consts.js');
var Effect = require('../Effects.js');
var Scroll = require('./Abstract/Scroll.js');
var u = require('../Utils.js');

/**
 * Parchemin de boule de feu
 */
var ScrollFireball = O2.extendClass(Scroll, {
	missileRef: 'p_fireball', // ce type de missile explose (défini par thinker)
	missiles: 1,

	read: function(ctx) {
		var eDam = new Effect.Damage(u.rand(30, 60));
		this.curse(eDam);
	},
	
	// sera déclenchée une fois les missiles créé
	use: function(ctx) {
		O2.parent(this, ctx);
		if (ctx.missiles && ctx.missiles.length) {
			ctx.missiles.forEach(function(m) {
				m.setData('explosion', ['o_expfire', 'GXQuake']);
			});
		}
	}
});

module.exports = ScrollFireball;
