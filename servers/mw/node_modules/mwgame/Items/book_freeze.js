var O2 = require('o2');
var CONST = require('../data/consts.js');
var Effect = require('../Effects.js');
var Book = require('./Abstract/Book.js');
var u = require('../Utils.js');

/**
 * spellbook of freeze (cone of cold)
 * déclenche une vague de froid instance, les cible touchée recoivent les effets suivants :
 * - Dégât : 8-16
 * - Paralysie pendant 6 secondes
 * - Ralentissement pendant 12 secondes
 * - Cadence de tir reduite pendant 12 secondes
 * - Les potion de l'inventaire gèle et restent gelées pendant 1 minute
 */
O2.extendClass('BookFreeze', Book, {
	cooldown: CONST.SPELL_DURATION_LEVEL[5],
	missileRef: 'p_icebolt',

	read: function(ctx) {
		var eHold, eSlow, eCD, eDam, eFreeze;
		eHold = new Effect.Hold(2);
		eHold.setDuration(CONST.EFFECT_DURATION_VERY_SHORT);
		eSlow = new Effect.Speed(-33);
		eSlow.setDuration(CONST.EFFECT_DURATION_SHORT);
		eCD = new Effect.Cooldown(40);
		eCD.setDuration(CONST.EFFECT_DURATION_SHORT);
		eDam = new Effect.Damage(u.rand(8, 16));
		eFreeze = new Effect.Freeze();
		eFreeze.setDuration(CONST.EFFECT_DURATION_LONG);
		this.curse([eHold, eSlow, eCD, eDam, eFreeze]);
	}
});

module.exports = BookFreeze;
